(this.webpackJsonpclient_src=this.webpackJsonpclient_src||[]).push([[17],{388:function(a,e,t){"use strict";t.r(e);var r=t(112),n=t(12),o=t(2),i=t(3),s=t(28),l=t(5),c=t(4),u=t(0),d=t(23),m=t(9),p=t(47),h=t(111),f=t(425),g=t(946),b=t.n(g),j=t(469),T=(t(442),t(372)),O=t(10),C=t(113),x=t(20),E=t(440),w=t(7),P=t.n(w),v=t(1),S={id:"",planta:"",numcam:"",col:"",fila:"",altura:"",pasillo:"",estado:"",groupmat:""},y=function(a){return[{Header:a("greencamaras.title"),foldable:!0,columns:[{Header:"ID",accessor:"id",sorteable:!1},{Header:a("greencamaras.planta"),accessor:"idPlanta",sorteable:!1},{accessor:"numcam",Header:a("greencamaras.numcam"),sorteable:!1},{accessor:"col",Header:a("greencamaras.columna"),filterable:!1,sorteable:!1},{accessor:"fila",Header:a("greencamaras.fila"),filterable:!1,sorteable:!1},{accessor:"altura",Header:a("greencamaras.altura"),filterable:!1,sorteable:!1},{accessor:"pasillo",Header:a("greencamaras.pasillo"),filterable:!1,sorteable:!1},{accessor:"idGrupmat",Header:a("greencamaras.groupmat"),filterable:!0,sorteable:!1},{Header:"",filterable:!1,sorteable:!1,width:40,Cell:function(e){return Object(v.jsx)("button",{className:b.a.eliminar,alt:a("general.eliminar"),children:Object(v.jsx)(x.Icon,{name:"close"})})}}]}]},G=function(a){Object(l.a)(t,a);var e=Object(c.a)(t);function t(a){var i;return Object(o.a)(this,t),(i=e.call(this,a)).getData=function(){P.a.all([Object(E.a)(),Object(f.i)()]).then((function(a){i.setState({plantas:a[0].data,camaras:a[1].data})})).catch((function(a){console.error(a.response),401===a.response.status&&i.setState({ifYouCan:!1})}))},i.componentDidMount=function(){i.getData()},i.handleInputChange=function(a){var e=Object(n.a)(Object(n.a)({},i.state.camara),{},Object(r.a)({},a.target.name,a.target.value));i.setState({camara:e})},i.handlerSubmit=function(a){i.setState({wait:!0});var e=Object(s.a)(i);a.preventDefault(),"crear"===i.state.mode&&""===i.state.camara.id?Object(f.b)({idPlanta:parseInt(i.state.camara.planta),numcam:parseInt(i.state.camara.numcam),col:parseInt(i.state.camara.col),fila:parseInt(i.state.camara.fila),altura:parseInt(i.state.camara.altura),pasillo:i.state.camara.pasillo,estado:!0,idGrupmat:parseInt(i.state.camara.groupmat)}).then((function(a){i.getData(),i.props.t("greencamaras.create"),i.setState(Object(n.a)(Object(n.a)({},i.state),{},{camara:S,mode:"crear",wait:!1,msg:i.props.t("greencamaras.creadoOk")}))})).catch((function(a){i.setState({wait:!1}),console.error(a.response),e.setState({msg:void 0!==a.response?i.props.t("greencamaras."+a.response.data.error.message):i.props.t("greencamaras.error")})})):Object(f.f)({id:parseInt(i.state.camara.id),idPlanta:parseInt(i.state.camara.planta),numcam:parseInt(i.state.camara.numcam),col:parseInt(i.state.camara.col),fila:parseInt(i.state.camara.fila),altura:parseInt(i.state.camara.altura),pasillo:i.state.camara.pasillo,estado:!0,idGrupmat:parseInt(i.state.camara.groupmat)}).then((function(a){i.getData(),i.setState(Object(n.a)(Object(n.a)({},i.state),{},{camara:S,mode:"crear",wait:!1,msg:i.props.t("greencamaras.modificadoOk")}))})).catch((function(a){i.setState({wait:!1}),console.error(a.response),e.setState({msg:void 0!==a.response?i.props.t("greencamaras."+a.response.data.error.code):i.props.t("greencamaras.error")})}))},i.handlerClear=function(){i.setState(Object(n.a)(Object(n.a)({},i.state),{},{camara:S,mode:"crear",wait:!1,msg:""}))},i.handlerGridAction=function(a,e,t,r){return{onClick:function(a){void 0!==e&&(i.setState({camara:{id:e.original.id,planta:e.original.idPlanta,numcam:e.original.numcam,col:e.original.col,fila:e.original.fila,altura:e.original.altura,pasillo:e.original.pasillo,estado:e.original.idEstado,groupmat:e.original.idGrupmat},msg:"",mode:"editar"}),""===t.Header&&(!0===window.confirm(i.props.t("general.estaseguro"))?i.handlerDelete(e.original.id):i.handlerClear()))}}},i.handlerSelectChange=function(a){i.setState(Object(n.a)(Object(n.a)({},i.state),{},{camara:Object(n.a)(Object(n.a)({},i.state.camara),{},Object(r.a)({},a.target.id,a.target.value))}))},i.handlerDelete=function(a){var e=Object(s.a)(i);Object(f.g)(a).then((function(a){i.handlerClear(),i.getData(),i.setState({msg:i.props.t("greencamaras.eliminadoOK")})})).catch((function(a){console.error(a.response),e.setState({msg:void 0!==a.response?i.props.t("greencamaras."+a.response.data.error.code):i.props.t("greencamaras.error")})}))},i._columns=y,i.state={camara:S,plantas:[],camaras:[],ifYouCan:!0,msg:"",mode:"crear",wait:!1},i}return Object(i.a)(t,[{key:"render",value:function(){var a=this.props.t,e=this.state.camara;return this.state.ifYouCan?Object(v.jsxs)(d.a,{direction:"columns",padding:"0",margin:"0",wrap:"wrap",children:[Object(v.jsx)(m.a,{height:"100%",padding:"0",width:"25%",auto:!0,children:Object(v.jsxs)(d.a,{direction:"column",padding:"0",margin:"0",wrap:"nowrap",round:"3px",children:[Object(v.jsx)("div",{className:b.a.title,children:Object(v.jsx)("h3",{children:"crear"===this.state.mode?a("greencamaras.newCamara"):a("greencamaras.modificarCamara",{camara:e.numcam})})}),Object(v.jsx)("div",{className:b.a.icon,children:Object(v.jsxs)("span",{className:"fa-stack fa-lg",children:[Object(v.jsx)("i",{className:"fa fa-circle fa-stack-2x fa-inverse "+b.a.shadow}),Object(v.jsx)("i",{className:"fa fa-snowflake-o fa-stack-1x "})]})}),Object(v.jsxs)("div",{className:"padding-default",children:[Object(v.jsx)(C.a,{id:"planta",label:a("general.planta"),items:this.state.plantas,itemId:"id",itemText:"descripcion",value:e.planta,onSelect:this.handlerSelectChange}),Object(v.jsx)(p.a,{id:"numcam",type:"text",label:a("greencamaras.numcam"),placeholder:a("greencamaras.numcam"),autocomplete:!1,required:!0,value:e.numcam||"",onChange:this.handleInputChange}),Object(v.jsx)(p.a,{id:"col",type:"text",label:a("greencamaras.columna"),placeholder:a("greencamaras.columna"),autocomplete:!1,required:!0,value:e.col||"",onChange:this.handleInputChange}),Object(v.jsx)(p.a,{id:"fila",type:"text",label:a("greencamaras.fila"),placeholder:a("greencamaras.fila"),autocomplete:!1,required:!0,value:e.fila||"",onChange:this.handleInputChange}),Object(v.jsx)(p.a,{id:"altura",type:"text",label:a("greencamaras.altura"),placeholder:a("greencamaras.altura"),autocomplete:!1,required:!0,value:e.altura||"",onChange:this.handleInputChange}),Object(v.jsx)(p.a,{id:"pasillo",type:"text",label:a("greencamaras.pasillo"),placeholder:a("greencamaras.pasillo"),autocomplete:!1,required:!0,value:e.pasillo||"",onChange:this.handleInputChange}),Object(v.jsx)(p.a,{id:"groupmat",type:"text",label:a("greencamaras.groupmat"),placeholder:a("greencamaras.groupmat"),autocomplete:!1,required:!0,value:e.groupmat||"",onChange:this.handleInputChange}),Object(v.jsxs)("div",{className:"center",children:[Object(v.jsx)(h.a,{visible:!0,loading:this.state.wait,disabled:""===e.planta||""===e.numcam||""===e.col||""===e.altura||""===e.pasillo||""===e.fila||""===e.groupmat,text:"editar"===this.state.mode?a("general.editar"):a("general.crear"),styleType:"success",id:"guardar",icon:"user",width:"100%",classes:b.a.btn,onPress:this.handlerSubmit}),Object(v.jsx)(h.a,{visible:"editar"===this.state.mode,type:"outline",loading:this.state.wait,disabled:this.state.wait,text:a("general.cancelar"),id:"cancelar",icon:"eraser",width:"100%",classes:b.a.btn,onPress:this.handlerClear}),Object(v.jsx)("div",{className:"center",children:this.state.msg})]})]})]})}),Object(v.jsx)(m.a,{height:"100%",padding:"0",width:"74%",auto:!0,children:Object(v.jsx)(j.a,{className:"-striped -highlight",data:this.state.camaras,columns:y(a),sortable:!0,multiSort:!0,resizable:!0,filterable:!0,defaultPageSize:25,getTdProps:this.handlerGridAction,previousText:a("general.previous"),nextText:a("general.next"),loadingText:a("general.loading"),noDataText:a("general.norowsfound"),pageText:a("general.page"),ofText:a("general.of"),rowsText:a("general.rows")})})]}):Object(v.jsx)(d.a,{direction:"columns",padding:"0",margin:"0",wrap:"wrap",children:Object(v.jsx)(m.a,{height:"100vh",children:Object(v.jsx)(O.c,{icon:"401",title:a("error.noAuth"),message:a("error.noAuthMessage")})})})}}]),t}(u.PureComponent);e.default=Object(T.a)()(G)},425:function(a,e,t){"use strict";t.d(e,"a",(function(){return g})),t.d(e,"d",(function(){return b})),t.d(e,"c",(function(){return j})),t.d(e,"b",(function(){return k})),t.d(e,"C",(function(){return E})),t.d(e,"e",(function(){return Y})),t.d(e,"f",(function(){return N})),t.d(e,"g",(function(){return z})),t.d(e,"A",(function(){return Z})),t.d(e,"i",(function(){return D})),t.d(e,"j",(function(){return u})),t.d(e,"B",(function(){return C})),t.d(e,"k",(function(){return H})),t.d(e,"l",(function(){return A})),t.d(e,"m",(function(){return y})),t.d(e,"n",(function(){return G})),t.d(e,"o",(function(){return m})),t.d(e,"p",(function(){return d})),t.d(e,"s",(function(){return O})),t.d(e,"q",(function(){return p})),t.d(e,"r",(function(){return T})),t.d(e,"u",(function(){return w})),t.d(e,"t",(function(){return v})),t.d(e,"w",(function(){return R})),t.d(e,"x",(function(){return M})),t.d(e,"y",(function(){return F})),t.d(e,"z",(function(){return U})),t.d(e,"E",(function(){return S})),t.d(e,"F",(function(){return h})),t.d(e,"G",(function(){return f})),t.d(e,"J",(function(){return B})),t.d(e,"I",(function(){return L})),t.d(e,"K",(function(){return _})),t.d(e,"L",(function(){return K})),t.d(e,"M",(function(){return q})),t.d(e,"N",(function(){return l})),t.d(e,"O",(function(){return c})),t.d(e,"h",(function(){return I})),t.d(e,"D",(function(){return x})),t.d(e,"v",(function(){return P})),t.d(e,"H",(function(){return J}));var r=t(448),n=t.n(r),o=t(7),i=t.n(o),s=null;function l(a,e){(s=n()("http://localhost:1212")).on("connect_error",(function(a){return e(a,null)})),s.on("pesobalanza",(function(a){return e(null,a)})),s.on("miestado",(function(a){return e(null,a)})),s.on("estadoBalanza",(function(a){return e(null,a)})),s.emit("myTransactionName",a),s.emit("subscribeGetPesoBal",300),console.log("subscribe",s)}function c(){var a,e;console.log("Unsubscribing",s),null===(a=s)||void 0===a||a.disconnect(),null===(e=s)||void 0===e||e.destroy()}function u(a){return i()({method:"GET",url:'../as-productos?filter={"where":{"idPlanta":'+a+"}}"})}function d(a,e){return i()({method:"GET",url:'../as-productos?filter={"where":{"idPlanta":'+a+',"idGrpmat":'+e+"}}"})}function m(a,e){return i()({method:"GET",url:'../as-productos?filter={"where":{"idPlanta":'+a+',"codsap":'+e+"}}"})}function p(a,e){return i()({method:"GET",url:'../cod-numeras?filter={"where":{"id":'+e+',"idPlanta":'+a+"}}"})}function h(a){return i()({method:"POST",url:"../as-detipals",data:a,headers:{"Content-Type":"application/json"}})}function f(a){return i()({method:"POST",url:"../as-hdetipals",data:a,headers:{"Content-Type":"application/json"}})}function g(a){return i()({method:"PUT",url:"../greentrz/"+a.idPlanta+"/"+a.numpal+"/"+a.idArea,data:a,headers:{"Content-Type":"application/json"}})}function b(a,e){return i()({method:"POST",url:"../greentrz/consumo-total/"+a.idNumpal+"/"+e,data:a,headers:{"Content-Type":"application/json"}})}function j(a,e){return i()({method:"POST",url:"../greentrz/consumo-parcial/"+a.idNumpal+"/"+e,data:a,headers:{"Content-Type":"application/json"}})}function T(a,e,t){return i()({method:"GET",url:'../as-detipals?filter={"limit": 10,"skip": 0,"order": ["numpal DESC","fec_prod DESC"],"where":{"idPlanta":'+a+',"idArea":'+e+',"ptoPes":'+t+',"idEstado":2}}'})}function O(a,e,t){return i()({method:"GET",url:'../as-detipals?filter={"limit": 10,"skip": 0,"order": ["numpal DESC","fec_prod DESC"],"where":{"idPlanta":'+a+',"idArea":'+e+',"ptoPes":'+t+',"idEstado":5}}'})}function C(a,e){return i()({method:"GET",url:"../greentrz/totalAConsumir/"+a+"/"+e})}function x(a,e){return i()({method:"GET",url:"../greentrz/totalProducidoFinal/"+a+"/"+e})}function E(a,e){return i()({method:"GET",url:"../greentrz/totalConsumidoFinal/"+a+"/"+e})}function w(a,e,t){return i()({method:"GET",url:'../as-detipals?filter={"limit": 1,"skip": 0,"order": ["numpal DESC"],"where":{"idPlanta":'+a+',"idArea":'+e+',"idEstado":1}}'})}function P(a,e,t){return i()({method:"GET",url:'../as-detipals?filter={"limit": 1,"skip": 0,"order": ["numpal DESC"],"where":{"idPlanta":'+a+',"idArea":'+e+',"idEstado":4}}'})}function v(a,e,t){return i()({method:"GET",url:'../as-conspals?filter={"limit": 15,"skip": 0,"order": ["hcierr DESC"],"where":{"idPlanta":'+a+',"idArea":'+e+',"ptoPes":'+t+',"idEstado":12}}'})}function S(a,e){return i()({method:"PUT",url:"../cod-numeras/"+a,data:e,headers:{"Content-Type":"application/json"}})}function y(a,e,t){return i()({method:"GET",url:"../greentrz/pallets/"+a+"/"+e+"/"+t})}function G(a){return i()({method:"GET",url:"../greentrz/palletsByNumpal/"+a})}function I(a,e,t){return i()({method:"DELETE",url:"../greentrz/pallet/"+a+"/"+e+"/"+t})}function _(a){return i()({method:"PUT",url:"../greentrz/remanejar/"+a.numpal,data:a})}function D(){return i()({method:"GET",url:"../param-cams"})}function k(a){return i()({method:"POST",url:"../param-cams/",data:a,headers:{"Content-Type":"application/json"}})}function N(a){return i()({method:"PUT",url:"../param-cams/"+a.id,data:a,headers:{"Content-Type":"application/json"}})}function z(a){return i()({method:"DELETE",url:"../param-cams/"+a,headers:{"Content-Type":"application/json"}})}function A(a){return i()({method:"GET",url:'../param-cams?filter={"where":{"idPlanta":'+a+"}}"})}function H(a){return i()({method:"GET",url:'../as-detipals?filter={"where":{"idPlanta":'+a+"}}"})}function U(a,e){return i()({method:"GET",url:"../as-pospal/getPositionPallet/"+a+"/"+e})}function q(a){return i()({method:"POST",url:"../as-pospals",data:a,headers:{"Content-Type":"application/json"}})}function B(a){return i()({method:"PUT",url:"../as-pospals/"+a.id,data:a,headers:{"Content-Type":"application/json"}})}function J(a){return i()({method:"POST",url:"../as-hpospals/",data:a,headers:{"Content-Type":"application/json"}})}function L(a,e){return i()({method:"PUT",url:"../as-detipal/estado-pallet/"+a+"/"+e,headers:{"Content-Type":"application/json"}})}function Y(a){return i()({method:"DELETE",url:"../as-pospals/"+a,headers:{"Content-Type":"application/json"}})}function F(a){return i()({method:"GET",url:"../camaras/getPalletsInCamaras/"+a})}function K(a,e){return i()({method:"GET",url:"../camaras/getPalletInCamara/"+a+"/"+e})}function M(a,e){return i()({method:"GET",url:"../as-detipal/getPalletDesasociados/"+a+"/"+e})}function R(a){return i()({method:"GET",url:"../as-detipal/pallets-a-consumir/"+a})}function Z(a){return i()({method:"GET",url:'../prodfamilias?filter={"where":{"idPlanta":'+a+"}}"})}},440:function(a,e,t){"use strict";t.d(e,"b",(function(){return i})),t.d(e,"a",(function(){return o}));var r=t(7),n=t.n(r);function o(){return n()({method:"GET",url:"../plantas"})}function i(a){return n()({method:"GET",url:'../prd-turnos?filter={"where":{"idPlanta":'+a+"}}"})}},946:function(a,e,t){a.exports={form:"styles_form__3gZdr",icon:"styles_icon__2UmYe",shadow:"styles_shadow__2J9BN",title:"styles_title__1t2Rf",eliminar:"styles_eliminar__3kcsS",btn:"styles_btn__JSbRK"}}}]);
//# sourceMappingURL=17.270109e7.chunk.js.map